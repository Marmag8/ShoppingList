<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:ShoppingList.Models"
             x:Class="ShoppingList.Views.ItemView"
             x:DataType="models:ListItemModel">
  <Border x:Name="Item" Margin="5" Padding="10" StrokeThickness="0" >
        <FlyoutBase.ContextFlyout>
            <MenuFlyout>
                <MenuFlyoutItem Text="Usuń"
                        Clicked="DeleteItem"
                        CommandParameter="{Binding .}"/>
                <MenuFlyoutItem Text="Oznacz/odznacz jako kupione"
                        Clicked="MarkAsBought"
                        CommandParameter="{Binding .}"/>
                <MenuFlyoutItem Text="Oznacz/odznacz jako opcjonalne"
                                Clicked="MarkAsOptional"
                                CommandParameter="{Binding .}"/>
                <MenuFlyoutSubItem Text="Opcje Ilości">
                    <MenuFlyoutItem Text="Zwiększ ilość"
                            Clicked="Increase"
                            CommandParameter="{Binding .}"/>
                    <MenuFlyoutItem Text="Zmniejsz ilość"
                            Clicked="Decrease"
                            CommandParameter="{Binding .}"/>
                    <MenuFlyoutItem Text="Podaj nową ilość"
                                    Clicked="ChangeAmount"
                                    CommandParameter="{Binding .}"/>
                </MenuFlyoutSubItem>
            </MenuFlyout>
        </FlyoutBase.ContextFlyout>

      <VerticalStackLayout Spacing="6">
            <HorizontalStackLayout Spacing="12">
                <Label Text="{Binding Name}"
                       FontSize="18"
                       FontAttributes="Bold">
                  <Label.Triggers>
                      <DataTrigger TargetType="Label" Binding="{Binding IsBought}" Value="True">
                          <Setter Property="TextDecorations" Value="Strikethrough" />
                          <Setter Property="TextColor" Value="{AppThemeBinding Light='#808080', Dark='#B0B0B0'}" />
                      </DataTrigger>
                  </Label.Triggers>
              </Label>

              <Border Padding="6,2"
                      BackgroundColor="{AppThemeBinding Light='#E8F0FE', Dark='#2A3B58'}"
                      Stroke="{AppThemeBinding Light='#C7D2FE', Dark='#3B4E78'}"
                      StrokeThickness="1"
                      IsVisible="{Binding IsOptional}">
                  <Label Text="Opcjonalne"
                         FontSize="12"
                         TextColor="{AppThemeBinding Light='#1F3B82', Dark='#DCE7FF'}"
                         HorizontalOptions="Start" />
              </Border>
          </HorizontalStackLayout>

            <HorizontalStackLayout Spacing="0">
                <Label Text="{Binding Amount, StringFormat='Ilosc: {0}'}" >
                    <Label.Triggers>
                        <DataTrigger TargetType="Label" Binding="{Binding IsBought}" Value="True">
                            <Setter Property="TextColor" Value="Gray"/>
                        </DataTrigger>
                        <DataTrigger TargetType="Label" Binding="{Binding IsBought}" Value="False">
                            <Setter Property="TextColor" Value="White"/>
                        </DataTrigger>
                    </Label.Triggers>
                </Label>
                <Label Text="{Binding Unit, StringFormat='{0}'}" >
                    <Label.Triggers>
                        <DataTrigger TargetType="Label" Binding="{Binding IsBought}" Value="True">
                            <Setter Property="TextColor" Value="Gray"/>
                        </DataTrigger>
                        <DataTrigger TargetType="Label" Binding="{Binding IsBought}" Value="False">
                            <Setter Property="TextColor" Value="White"/>
                        </DataTrigger>
                    </Label.Triggers>
                </Label>
            </HorizontalStackLayout>
        </VerticalStackLayout>
  </Border>
</ContentView>
